{"version":3,"file":"node_modules_project-serum_sol-wallet-adapter_dist_esm_index_js.js","mappings":"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","sources":["./node_modules/@project-serum/sol-wallet-adapter/dist/esm/index.js","./node_modules/@solana/web3.js/node_modules/bs58/index.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport EventEmitter from 'eventemitter3';\nimport { PublicKey } from '@solana/web3.js';\nimport bs58 from 'bs58';\nexport default class Wallet extends EventEmitter {\n    constructor(provider, _network) {\n        super();\n        this._network = _network;\n        this._publicKey = null;\n        this._popup = null;\n        this._handlerAdded = false;\n        this._nextRequestId = 1;\n        this._autoApprove = false;\n        this._responsePromises = new Map();\n        this.handleMessage = (e) => {\n            var _a;\n            if ((this._injectedProvider && e.source === window) ||\n                (e.origin === ((_a = this._providerUrl) === null || _a === void 0 ? void 0 : _a.origin) && e.source === this._popup)) {\n                if (e.data.method === 'connected') {\n                    const newPublicKey = new PublicKey(e.data.params.publicKey);\n                    if (!this._publicKey || !this._publicKey.equals(newPublicKey)) {\n                        if (this._publicKey && !this._publicKey.equals(newPublicKey)) {\n                            this.handleDisconnect();\n                        }\n                        this._publicKey = newPublicKey;\n                        this._autoApprove = !!e.data.params.autoApprove;\n                        this.emit('connect', this._publicKey);\n                    }\n                }\n                else if (e.data.method === 'disconnected') {\n                    this.handleDisconnect();\n                }\n                else if (e.data.result || e.data.error) {\n                    const promises = this._responsePromises.get(e.data.id);\n                    if (promises) {\n                        const [resolve, reject] = promises;\n                        if (e.data.result) {\n                            resolve(e.data.result);\n                        }\n                        else {\n                            reject(new Error(e.data.error));\n                        }\n                    }\n                }\n            }\n        };\n        this._beforeUnload = () => {\n            void this.disconnect();\n        };\n        if (isInjectedProvider(provider)) {\n            this._injectedProvider = provider;\n        }\n        else if (isString(provider)) {\n            this._providerUrl = new URL(provider);\n            this._providerUrl.hash = new URLSearchParams({\n                origin: window.location.origin,\n                network: this._network,\n            }).toString();\n        }\n        else {\n            throw new Error('provider parameter must be an injected provider or a URL string.');\n        }\n    }\n    handleConnect() {\n        var _a;\n        if (!this._handlerAdded) {\n            this._handlerAdded = true;\n            window.addEventListener('message', this.handleMessage);\n            window.addEventListener('beforeunload', this._beforeUnload);\n        }\n        if (this._injectedProvider) {\n            return new Promise((resolve) => {\n                void this.sendRequest('connect', {});\n                resolve();\n            });\n        }\n        else {\n            window.name = 'parent';\n            this._popup = window.open((_a = this._providerUrl) === null || _a === void 0 ? void 0 : _a.toString(), '_blank', 'location,resizable,width=460,height=675');\n            return new Promise((resolve) => {\n                this.once('connect', resolve);\n            });\n        }\n    }\n    handleDisconnect() {\n        if (this._handlerAdded) {\n            this._handlerAdded = false;\n            window.removeEventListener('message', this.handleMessage);\n            window.removeEventListener('beforeunload', this._beforeUnload);\n        }\n        if (this._publicKey) {\n            this._publicKey = null;\n            this.emit('disconnect');\n        }\n        this._responsePromises.forEach(([, reject], id) => {\n            this._responsePromises.delete(id);\n            reject(new Error('Wallet disconnected'));\n        });\n    }\n    sendRequest(method, params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (method !== 'connect' && !this.connected) {\n                throw new Error('Wallet not connected');\n            }\n            const requestId = this._nextRequestId;\n            ++this._nextRequestId;\n            return new Promise((resolve, reject) => {\n                var _a, _b, _c, _d;\n                this._responsePromises.set(requestId, [resolve, reject]);\n                if (this._injectedProvider) {\n                    this._injectedProvider.postMessage({\n                        jsonrpc: '2.0',\n                        id: requestId,\n                        method,\n                        params: Object.assign({ network: this._network }, params),\n                    });\n                }\n                else {\n                    (_a = this._popup) === null || _a === void 0 ? void 0 : _a.postMessage({\n                        jsonrpc: '2.0',\n                        id: requestId,\n                        method,\n                        params,\n                    }, (_c = (_b = this._providerUrl) === null || _b === void 0 ? void 0 : _b.origin) !== null && _c !== void 0 ? _c : '');\n                    if (!this.autoApprove) {\n                        (_d = this._popup) === null || _d === void 0 ? void 0 : _d.focus();\n                    }\n                }\n            });\n        });\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connected() {\n        return this._publicKey !== null;\n    }\n    get autoApprove() {\n        return this._autoApprove;\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._popup) {\n                this._popup.close();\n            }\n            yield this.handleConnect();\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._injectedProvider) {\n                yield this.sendRequest('disconnect', {});\n            }\n            if (this._popup) {\n                this._popup.close();\n            }\n            this.handleDisconnect();\n        });\n    }\n    sign(data, display) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!(data instanceof Uint8Array)) {\n                throw new Error('Data must be an instance of Uint8Array');\n            }\n            const response = (yield this.sendRequest('sign', {\n                data,\n                display,\n            }));\n            const signature = bs58.decode(response.signature);\n            const publicKey = new PublicKey(response.publicKey);\n            return {\n                signature,\n                publicKey,\n            };\n        });\n    }\n    signTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = (yield this.sendRequest('signTransaction', {\n                message: bs58.encode(transaction.serializeMessage()),\n            }));\n            const signature = bs58.decode(response.signature);\n            const publicKey = new PublicKey(response.publicKey);\n            transaction.addSignature(publicKey, signature);\n            return transaction;\n        });\n    }\n    signAllTransactions(transactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const response = (yield this.sendRequest('signAllTransactions', {\n                messages: transactions.map((tx) => bs58.encode(tx.serializeMessage())),\n            }));\n            const signatures = response.signatures.map((s) => bs58.decode(s));\n            const publicKey = new PublicKey(response.publicKey);\n            transactions = transactions.map((tx, idx) => {\n                tx.addSignature(publicKey, signatures[idx]);\n                return tx;\n            });\n            return transactions;\n        });\n    }\n    diffieHellman(publicKey) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!(publicKey instanceof Uint8Array)) {\n                throw new Error('Data must be an instance of Uint8Array');\n            }\n            const response = (yield this.sendRequest('diffieHellman', {\n                publicKey,\n            }));\n            return response;\n        });\n    }\n}\nfunction isString(a) {\n    return typeof a === 'string';\n}\nfunction isInjectedProvider(a) {\n    return (isObject(a) && 'postMessage' in a && typeof a.postMessage === 'function');\n}\nfunction isObject(a) {\n    return typeof a === 'object' && a !== null;\n}\n","var basex = require('base-x')\nvar ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","EventEmitter","PublicKey","bs58","Wallet","constructor","provider","_network","_publicKey","_popup","_handlerAdded","_nextRequestId","_autoApprove","_responsePromises","Map","handleMessage","_a","_injectedProvider","source","window","origin","_providerUrl","data","method","newPublicKey","params","publicKey","equals","handleDisconnect","autoApprove","emit","error","promises","get","id","Error","_beforeUnload","disconnect","isInjectedProvider","isString","URL","hash","URLSearchParams","location","network","toString","handleConnect","addEventListener","sendRequest","name","open","once","removeEventListener","forEach","delete","connected","requestId","_b","_c","_d","set","postMessage","jsonrpc","Object","assign","focus","connect","close","sign","display","Uint8Array","response","signature","decode","signTransaction","transaction","message","encode","serializeMessage","addSignature","signAllTransactions","transactions","messages","map","tx","signatures","s","idx","diffieHellman","a","isObject","basex","require","ALPHABET","module","exports"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1]}